{"ast":null,"code":"var _jsxFileName = \"/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Nav, Navbar, NavItem } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\nimport Amplify, { Auth, Hub } from \"aws-amplify\";\nimport config from './config';\nimport { withOAuth } from 'aws-amplify-react'; // your Cognito Hosted UI configuration\n\nconst oauth = {\n  domain: 'music-app.auth.eu-west-1.amazoncognito.com',\n  scope: ['email', 'profile', 'openid'],\n  redirectSignIn: 'http://localhost:3000/',\n  redirectSignOut: 'http://localhost:3000/',\n  responseType: 'code' // or 'token', note that REFRESH token will only be generated when the responseType is code\n\n};\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: config.cognito.REGION,\n    userPoolId: config.cognito.USER_POOL_ID,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: config.cognito.APP_CLIENT_ID,\n    oauth\n  }\n});\nAuth.configure({\n  oauth\n});\n\nclass OAuthButton extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.props.OAuthSignIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 7\n      }\n    }, \"Sign in with AWS\");\n  }\n\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this); // let the Hub module listen on Auth events\n\n    Hub.listen('auth', data => {\n      switch (data.payload.event) {\n        case 'signIn':\n          this.setState({\n            authState: 'signedIn',\n            authData: data.payload.data\n          });\n          break;\n\n        case 'signIn_failure':\n          this.setState({\n            authState: 'signIn',\n            authData: null,\n            authError: data.payload.data\n          });\n          break;\n\n        default:\n          break;\n      }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    };\n  }\n\n  componentDidMount() {\n    console.log('on component mount'); // check the current user when the App component is loaded\n\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({\n        authState: 'signedIn'\n      });\n    }).catch(e => {\n      console.log(e);\n      this.setState({\n        authState: 'signIn'\n      });\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({\n        authState: 'signIn'\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const {\n      authState\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, authState === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 38\n      }\n    }, \"loading...\"), authState === 'signIn' && /*#__PURE__*/React.createElement(OAuthButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 36\n      }\n    }), authState === 'signedIn' && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.signOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 38\n      }\n    }, \"Sign out\"));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js"],"names":["React","Component","useState","useEffect","Link","withRouter","Nav","Navbar","NavItem","LinkContainer","Routes","Amplify","Auth","Hub","config","withOAuth","oauth","domain","scope","redirectSignIn","redirectSignOut","responseType","configure","mandatorySignIn","region","cognito","REGION","userPoolId","USER_POOL_ID","identityPoolId","IDENTITY_POOL_ID","userPoolWebClientId","APP_CLIENT_ID","OAuthButton","render","props","OAuthSignIn","App","constructor","signOut","bind","listen","data","payload","event","setState","authState","authData","authError","state","componentDidMount","console","log","currentAuthenticatedUser","then","user","catch","e"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Nav, Navbar, NavItem } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\nimport Amplify, { Auth, Hub } from \"aws-amplify\";\nimport config from './config';\nimport { withOAuth } from 'aws-amplify-react';\n\n// your Cognito Hosted UI configuration\nconst oauth = {\n  domain: 'music-app.auth.eu-west-1.amazoncognito.com',\n  scope: ['email', 'profile', 'openid'],\n  redirectSignIn: 'http://localhost:3000/',\n  redirectSignOut: 'http://localhost:3000/',\n  responseType: 'code' // or 'token', note that REFRESH token will only be generated when the responseType is code\n};\n\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: config.cognito.REGION,\n    userPoolId: config.cognito.USER_POOL_ID,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: config.cognito.APP_CLIENT_ID,\n    oauth\n  }\n});\nAuth.configure({ oauth })\n\nclass OAuthButton extends Component {\n  render() {\n    return (\n      <button onClick={this.props.OAuthSignIn}>\n        Sign in with AWS\n      </button>\n    )\n  }\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this);\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n        switch (data.payload.event) {\n            case 'signIn':\n                this.setState({authState: 'signedIn', authData: data.payload.data});\n                break;\n            case 'signIn_failure':\n                this.setState({authState: 'signIn', authData: null, authError: data.payload.data});\n                break;\n            default:\n                break;\n        }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    }\n  }\n\n  componentDidMount() {\n    console.log('on component mount');\n    // check the current user when the App component is loaded\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({authState: 'signedIn'});\n    }).catch(e => {\n      console.log(e);\n      this.setState({authState: 'signIn'});\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({authState: 'signIn'});\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const { authState } = this.state;\n    return (\n      <div className=\"App\">\n        {authState === 'loading' && (<div>loading...</div>)}\n        {authState === 'signIn' && <OAuthButton/>}\n        {authState === 'signedIn' && <button onClick={this.signOut}>Sign out</button>}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}