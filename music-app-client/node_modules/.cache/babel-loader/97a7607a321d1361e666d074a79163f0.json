{"ast":null,"code":"var _jsxFileName = \"/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport OAuthButton from './OAuthButton';\nimport Amplify, { Auth, Hub } from 'aws-amplify';\nimport awsconfig from './config'; // your Amplify configuration\n// your Cognito Hosted UI configuration\n\nconst oauth = {\n  domain: 'your_cognito_domain',\n  scope: ['phone', 'email', 'profile', 'openid', 'aws.cognito.signin.user.admin'],\n  redirectSignIn: 'http://localhost:3000/',\n  redirectSignOut: 'http://localhost:3000/',\n  responseType: 'code' // or 'token', note that REFRESH token will only be generated when the responseType is code\n\n};\nAmplify.configure(awsconfig);\nAuth.configure({\n  oauth: {\n    domain: \"eu-west-1:e659b87a-7814-4ef3-aea9-912815cb8668\",\n    scope: [\"email\", \"profile\", \"openid\"],\n    redirectSignIn: \"http://localhost:3000/\",\n    redirectSignOut: \"http://localhost:3000/\",\n    responseType: \"code\"\n  }\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this); // let the Hub module listen on Auth events\n\n    Hub.listen('auth', data => {\n      switch (data.payload.event) {\n        case 'signIn':\n          this.setState({\n            authState: 'signedIn',\n            authData: data.payload.data\n          });\n          break;\n\n        case 'signIn_failure':\n          this.setState({\n            authState: 'signIn',\n            authData: null,\n            authError: data.payload.data\n          });\n          break;\n\n        default:\n          break;\n      }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    };\n  }\n\n  componentDidMount() {\n    console.log('on component mount'); // check the current user when the App component is loaded\n\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({\n        authState: 'signedIn'\n      });\n    }).catch(e => {\n      console.log(e);\n      this.setState({\n        authState: 'signIn'\n      });\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({\n        authState: 'signIn'\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const {\n      authState\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }, authState === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 38\n      }\n    }, \"loading...\"), authState === 'signIn' && /*#__PURE__*/React.createElement(OAuthButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 36\n      }\n    }), authState === 'signedIn' && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.signOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 38\n      }\n    }, \"Sign out\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js"],"names":["React","Component","OAuthButton","Amplify","Auth","Hub","awsconfig","oauth","domain","scope","redirectSignIn","redirectSignOut","responseType","configure","App","constructor","props","signOut","bind","listen","data","payload","event","setState","authState","authData","authError","state","componentDidMount","console","log","currentAuthenticatedUser","then","user","catch","e","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport OAuthButton from './OAuthButton';\nimport Amplify, { Auth, Hub } from 'aws-amplify';\nimport awsconfig from './config'; // your Amplify configuration\n\n// your Cognito Hosted UI configuration\nconst oauth = {\n  domain: 'your_cognito_domain',\n  scope: ['phone', 'email', 'profile', 'openid', 'aws.cognito.signin.user.admin'],\n  redirectSignIn: 'http://localhost:3000/',\n  redirectSignOut: 'http://localhost:3000/',\n  responseType: 'code' // or 'token', note that REFRESH token will only be generated when the responseType is code\n};\n\nAmplify.configure(awsconfig);\nAuth.configure({\n  oauth: {\n    domain: \"eu-west-1:e659b87a-7814-4ef3-aea9-912815cb8668\",\n    scope: [\n        \"email\",\n        \"profile\",\n        \"openid\"\n    ],\n    redirectSignIn: \"http://localhost:3000/\",\n    redirectSignOut: \"http://localhost:3000/\",\n    responseType: \"code\"\n  }\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this);\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n        switch (data.payload.event) {\n            case 'signIn':\n                this.setState({authState: 'signedIn', authData: data.payload.data});\n                break;\n            case 'signIn_failure':\n                this.setState({authState: 'signIn', authData: null, authError: data.payload.data});\n                break;\n            default:\n                break;\n        }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    }\n  }\n\n  componentDidMount() {\n    console.log('on component mount');\n    // check the current user when the App component is loaded\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({authState: 'signedIn'});\n    }).catch(e => {\n      console.log(e);\n      this.setState({authState: 'signIn'});\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({authState: 'signIn'});\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const { authState } = this.state;\n    return (\n      <div className=\"App\">\n        {authState === 'loading' && (<div>loading...</div>)}\n        {authState === 'signIn' && <OAuthButton/>}\n        {authState === 'signedIn' && <button onClick={this.signOut}>Sign out</button>}\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}