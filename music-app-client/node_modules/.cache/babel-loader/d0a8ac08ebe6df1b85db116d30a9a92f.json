{"ast":null,"code":"var _jsxFileName = \"/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Nav, Navbar, NavItem } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\nimport { Auth, Hub } from \"aws-amplify\";\n\nclass OAuthButton extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.props.OAuthSignIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 7\n      }\n    }, \"Sign in with AWS\");\n  }\n\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this); // let the Hub module listen on Auth events\n\n    Hub.listen('auth', data => {\n      switch (data.payload.event) {\n        case 'signIn':\n          this.setState({\n            authState: 'signedIn',\n            authData: data.payload.data\n          });\n          break;\n\n        case 'signIn_failure':\n          this.setState({\n            authState: 'signIn',\n            authData: null,\n            authError: data.payload.data\n          });\n          break;\n\n        default:\n          break;\n      }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    };\n  }\n\n  componentDidMount() {\n    console.log('on component mount'); // check the current user when the App component is loaded\n\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({\n        authState: 'signedIn'\n      });\n    }).catch(e => {\n      console.log(e);\n      this.setState({\n        authState: 'signIn'\n      });\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({\n        authState: 'signIn'\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const {\n      authState\n    } = this.state;\n    return !isAuthenticating && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, authState === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 38\n      }\n    }, \"loading...\"), authState === 'signIn' && /*#__PURE__*/React.createElement(OAuthButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 36\n      }\n    }), authState === 'signedIn' && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.signOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 38\n      }\n    }, \"Sign out\"), /*#__PURE__*/React.createElement(Routes, {\n      appProps: {\n        isAuthenticated,\n        userHasAuthenticated\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js"],"names":["React","Component","useState","useEffect","Link","withRouter","Nav","Navbar","NavItem","LinkContainer","Routes","Auth","Hub","OAuthButton","render","props","OAuthSignIn","App","constructor","signOut","bind","listen","data","payload","event","setState","authState","authData","authError","state","componentDidMount","console","log","currentAuthenticatedUser","then","user","catch","e","isAuthenticating","isAuthenticated","userHasAuthenticated"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Nav, Navbar, NavItem } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\nimport { Auth, Hub } from \"aws-amplify\";\n\n\nclass OAuthButton extends Component {\n  render() {\n    return (\n      <button onClick={this.props.OAuthSignIn}>\n        Sign in with AWS\n      </button>\n    )\n  }\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this);\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n        switch (data.payload.event) {\n            case 'signIn':\n                this.setState({authState: 'signedIn', authData: data.payload.data});\n                break;\n            case 'signIn_failure':\n                this.setState({authState: 'signIn', authData: null, authError: data.payload.data});\n                break;\n            default:\n                break;\n        }\n    });\n    this.state = {\n      authState: 'loading',\n      authData: null,\n      authError: null\n    }\n  }\n\n  componentDidMount() {\n    console.log('on component mount');\n    // check the current user when the App component is loaded\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n      this.setState({authState: 'signedIn'});\n    }).catch(e => {\n      console.log(e);\n      this.setState({authState: 'signIn'});\n    });\n  }\n\n  signOut() {\n    Auth.signOut().then(() => {\n      this.setState({authState: 'signIn'});\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const { authState } = this.state;\n    return (\n      !isAuthenticating &&\n      <div className=\"App container\">\n        {authState === 'loading' && (<div>loading...</div>)}\n        {authState === 'signIn' && <OAuthButton/>}\n        {authState === 'signedIn' && <button onClick={this.signOut}>Sign out</button>}\n        <Routes appProps={{ isAuthenticated, userHasAuthenticated }} />\n      </div>\n    )\n  }\n}\n\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}