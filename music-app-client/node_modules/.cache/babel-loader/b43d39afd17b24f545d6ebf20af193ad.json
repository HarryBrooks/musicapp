{"ast":null,"code":"var _jsxFileName = \"/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js\";\nimport React, { Component } from 'react';\nimport { Auth } from 'aws-amplify'; // To federated sign in from Google\n\nclass SignInWithGoogle extends Component {\n  constructor(props) {\n    super(props);\n    this.signIn = this.signIn.bind(this);\n  }\n\n  componentDidMount() {\n    const ga = window.gapi && window.gapi.auth2 ? window.gapi.auth2.getAuthInstance() : null;\n    if (!ga) this.createScript();\n  }\n\n  signIn() {\n    const ga = window.gapi.auth2.getAuthInstance();\n    ga.signIn().then(googleUser => {\n      this.getAWSCredentials(googleUser);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  async getAWSCredentials(googleUser) {\n    const {\n      id_token,\n      expires_at\n    } = googleUser.getAuthResponse();\n    const profile = googleUser.getBasicProfile();\n    let user = {\n      email: profile.getEmail(),\n      name: profile.getName()\n    };\n    const credentials = await Auth.federatedSignIn('google', {\n      token: id_token,\n      expires_at\n    }, user);\n    console.log('credentials', credentials);\n  }\n\n  createScript() {\n    // load the Google SDK\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/platform.js';\n    script.async = true;\n    script.onload = this.initGapi;\n    document.body.appendChild(script);\n  }\n\n  initGapi() {\n    // init the Google SDK client\n    const g = window.gapi;\n    g.load('auth2', function () {\n      g.auth2.init({\n        client_id: '1098133489428-o8rfcd4fe7kvcmrke4806i3jvsc74h8e.apps.googleusercontent.com',\n        // authorized scopes\n        scope: 'profile email openid'\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.signIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Sign in with Google\"));\n  }\n\n}","map":{"version":3,"sources":["/Users/harrybrooks/Documents/Computing/Music App/music-app-client/src/App.js"],"names":["React","Component","Auth","SignInWithGoogle","constructor","props","signIn","bind","componentDidMount","ga","window","gapi","auth2","getAuthInstance","createScript","then","googleUser","getAWSCredentials","error","console","log","id_token","expires_at","getAuthResponse","profile","getBasicProfile","user","email","getEmail","name","getName","credentials","federatedSignIn","token","script","document","createElement","src","async","onload","initGapi","body","appendChild","g","load","init","client_id","scope","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,aAArB,C,CACA;;AACA,MAAMC,gBAAN,SAA+BF,SAA/B,CAAyC;AACrCG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,EAAE,GAAGC,MAAM,CAACC,IAAP,IAAeD,MAAM,CAACC,IAAP,CAAYC,KAA3B,GACPF,MAAM,CAACC,IAAP,CAAYC,KAAZ,CAAkBC,eAAlB,EADO,GAEP,IAFJ;AAGA,QAAI,CAACJ,EAAL,EAAS,KAAKK,YAAL;AACZ;;AAEDR,EAAAA,MAAM,GAAG;AACL,UAAMG,EAAE,GAAGC,MAAM,CAACC,IAAP,CAAYC,KAAZ,CAAkBC,eAAlB,EAAX;AACAJ,IAAAA,EAAE,CAACH,MAAH,GAAYS,IAAZ,CACIC,UAAU,IAAI;AACV,WAAKC,iBAAL,CAAuBD,UAAvB;AACH,KAHL,EAIIE,KAAK,IAAI;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANL;AAQH;;AAED,QAAMD,iBAAN,CAAwBD,UAAxB,EAAoC;AAChC,UAAM;AAAEK,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA2BN,UAAU,CAACO,eAAX,EAAjC;AACA,UAAMC,OAAO,GAAGR,UAAU,CAACS,eAAX,EAAhB;AACA,QAAIC,IAAI,GAAG;AACPC,MAAAA,KAAK,EAAEH,OAAO,CAACI,QAAR,EADA;AAEPC,MAAAA,IAAI,EAAEL,OAAO,CAACM,OAAR;AAFC,KAAX;AAKA,UAAMC,WAAW,GAAG,MAAM7B,IAAI,CAAC8B,eAAL,CACtB,QADsB,EAEtB;AAAEC,MAAAA,KAAK,EAAEZ,QAAT;AAAmBC,MAAAA;AAAnB,KAFsB,EAGtBI,IAHsB,CAA1B;AAKAP,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BW,WAA3B;AACH;;AAEDjB,EAAAA,YAAY,GAAG;AACX;AACA,UAAMoB,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,GAAP,GAAa,wCAAb;AACAH,IAAAA,MAAM,CAACI,KAAP,GAAe,IAAf;AACAJ,IAAAA,MAAM,CAACK,MAAP,GAAgB,KAAKC,QAArB;AACAL,IAAAA,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,MAA1B;AACH;;AAEDM,EAAAA,QAAQ,GAAG;AACP;AACA,UAAMG,CAAC,GAAGjC,MAAM,CAACC,IAAjB;AACAgC,IAAAA,CAAC,CAACC,IAAF,CAAO,OAAP,EAAgB,YAAW;AACvBD,MAAAA,CAAC,CAAC/B,KAAF,CAAQiC,IAAR,CAAa;AACTC,QAAAA,SAAS,EAAE,2EADF;AAET;AACAC,QAAAA,KAAK,EAAE;AAHE,OAAb;AAKH,KAND;AAOH;;AAEDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,OAAO,EAAE,KAAK1C,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,CADJ;AAKH;;AApEoC","sourcesContent":["import React, { Component } from 'react';\nimport { Auth } from 'aws-amplify';\n// To federated sign in from Google\nclass SignInWithGoogle extends Component {\n    constructor(props) {\n        super(props);\n        this.signIn = this.signIn.bind(this);\n    }\n\n    componentDidMount() {\n        const ga = window.gapi && window.gapi.auth2 ? \n            window.gapi.auth2.getAuthInstance() : \n            null;\n        if (!ga) this.createScript();\n    }\n\n    signIn() {\n        const ga = window.gapi.auth2.getAuthInstance();\n        ga.signIn().then(\n            googleUser => {\n                this.getAWSCredentials(googleUser);\n            },\n            error => {\n                console.log(error);\n            }\n        );\n    }\n\n    async getAWSCredentials(googleUser) {\n        const { id_token, expires_at } = googleUser.getAuthResponse();\n        const profile = googleUser.getBasicProfile();\n        let user = {\n            email: profile.getEmail(),\n            name: profile.getName()\n        };\n        \n        const credentials = await Auth.federatedSignIn(\n            'google',\n            { token: id_token, expires_at },\n            user\n        );\n        console.log('credentials', credentials);\n    }\n\n    createScript() {\n        // load the Google SDK\n        const script = document.createElement('script');\n        script.src = 'https://apis.google.com/js/platform.js';\n        script.async = true;\n        script.onload = this.initGapi;\n        document.body.appendChild(script);\n    }\n\n    initGapi() {\n        // init the Google SDK client\n        const g = window.gapi;\n        g.load('auth2', function() {\n            g.auth2.init({\n                client_id: '1098133489428-o8rfcd4fe7kvcmrke4806i3jvsc74h8e.apps.googleusercontent.com',\n                // authorized scopes\n                scope: 'profile email openid'\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                <button onClick={this.signIn}>Sign in with Google</button>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}